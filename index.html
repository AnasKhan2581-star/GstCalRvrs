<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reverse Billing</title>
</head>
<body style="font-family: Arial, sans-serif; margin: 10px;">

<div style="max-width: 800px; margin: 0 auto; border: 1px solid #000; padding: 10px;">

    <!-- Header Section -->
    <div>
        <div style="font-size: 16px; font-weight: bold;">GSTIN: 07AGGPK5556M1ZX</div>
        <div style="font-size: 20px; font-weight: bold; text-transform: uppercase;">Anas Traders</div>
        <div>4760/2 Ground Floor, Jaipuria Building, Jogiwara, Nai Sarak, Delhi-06, Mob.: 9899558755</div>
        <div style="text-align: center; font-weight: bold; margin-top: 10px;">Tax Invoice</div>
    </div>

    <!-- Invoice Details -->
    <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 14px;">
        <div>
            <div>Invoice No.: <input type="text" id="invoiceNo" style="border: none; border-bottom: 1px solid #000;"></div>
            <div>Dated: <input type="date" id="invoiceDate" style="border: none; border-bottom: 1px solid #000;"></div>
        </div>
        <div>
            <div>Book No.: <input type="text" id="bookNo" style="border: none; border-bottom: 1px solid #000;"></div>
        </div>
    </div>

    <div style="margin-top: 10px; font-size: 14px;">
        <div>Bill To: <strong>Cash</strong></div>
    </div>

    <!-- Table Header -->
    <table style="width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 14px;">
        <thead>
            <tr>
                <th style="border: 1px solid #000; padding: 5px;">Sr. No.</th>
                <th style="border: 1px solid #000; padding: 5px;">Description of Goods</th>
                <th style="border: 1px solid #000; padding: 5px;">HSN Code</th>
                <th style="border: 1px solid #000; padding: 5px;">Qty</th>
                <th style="border: 1px solid #000; padding: 5px;">Unit</th>
                <th style="border: 1px solid #000; padding: 5px;">Rate</th>
                <th style="border: 1px solid #000; padding: 5px;">Amount</th>
            </tr>
        </thead>
        <tbody id="productTable">
            <!-- Dynamic Rows Will Be Added Here -->
        </tbody>
    </table>

    <div style="text-align: right; margin-top: 10px; font-size: 14px;">
        <button onclick="addRow()" style="padding: 5px 10px; font-size: 14px;">Add Product</button>
    </div>

    <!-- Totals Section -->
    <table style="width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 14px;">
        <tr>
            <th style="text-align: left;">Invoice Value (in Words):</th>
            <td style="border: 1px solid #000; padding: 5px; text-align: right;" colspan="6"><span id="invoiceWords"></span></td>
        </tr>
        <tr>
            <td colspan="6"></td>
            <td style="border: 1px solid #000; padding: 5px;">
                Taxable Amount: <span id="taxableAmount">0</span><br>
                SGST (2.5%): <span id="sgst">0</span><br>
                CGST (2.5%): <span id="cgst">0</span><br>
                Grand Total: <span id="grandTotal">0</span>
            </td>
        </tr>
    </table>

    <div style="margin-top: 20px; font-size: 14px;">
        E.&O.E.<br>
        Goods once sold will not be taken back.
    </div>

    <div style="text-align: right; margin-top: 20px;">
        For ANAS TRADERS<br>
        Auth. Signature
    </div>
</div>

<script>
    function addRow() {
        const table = document.getElementById("productTable");

        const row = document.createElement("tr");

        // Dropdown for products
        const productOptions = `
            <option value="Saree" data-hsn="5407" data-unit="pcs">Saree</option>
            <option value="Fabric" data-hsn="5408" data-unit="mtrs">Fabric</option>
            <option value="Suit Unstitched" data-hsn="5407" data-unit="pcs">Suit Unstitched</option>
        `;

        row.innerHTML = `
            <td>${table.rows.length + 1}</td>
            <td>
                <select onchange="updateRow(this)" style="width: 100%; border: none;">
                    <option value="">Select</option>
                    ${productOptions}
                </select>
            </td>
            <td class="hsn" style="text-align: center;"></td>
            <td class="qty" style="text-align: center;"></td>
            <td class="unit" style="text-align: center;"></td>
            <td><input type="number" class="rate" oninput="calculateAmount(this)" style="width: 100%; border: none;"></td>
            <td><input type="number" class="amount" oninput="calculateQuantity(this)" style="width: 100%; border: none;"></td>
        `;

        table.appendChild(row);
    }

    function updateRow(select) {
        const row = select.closest("tr");
        const selectedOption = select.options[select.selectedIndex];
        row.querySelector(".hsn").innerText = selectedOption.dataset.hsn || "";
        row.querySelector(".unit").innerText = selectedOption.dataset.unit || "";
    }

    function calculateAmount(input) {
        const row = input.closest("tr");
        const rate = parseFloat(row.querySelector(".rate").value) || 0;
        const amount = parseFloat(row.querySelector(".amount").value) || 0;

        if (rate > 0) {
            const qty = amount / rate;
            row.querySelector(".qty").innerText = qty.toFixed(2);
        }

        calculateTotals();
    }

    function calculateQuantity(input) {
        const row = input.closest("tr");
        const rate = parseFloat(row.querySelector(".rate").value) || 0;
        const amount = parseFloat(input.value) || 0;

        if (rate > 0) {
            const qty = amount / rate;
            row.querySelector(".qty").innerText = qty.toFixed(2);
        }

        calculateTotals();
    }

    function calculateTotals() {
        const rows = document.querySelectorAll("#productTable tr");
        let taxableAmount = 0;

        rows.forEach(row => {
            const amount = parseFloat(row.querySelector(".amount").value) || 0;
            taxableAmount += amount;
        });

        const sgst = Math.round(taxableAmount * 0.025);
        const cgst = Math.round(taxableAmount * 0.025);
        const grandTotal = taxableAmount + sgst + cgst;

        document.getElementById("taxableAmount").innerText = taxableAmount.toFixed(2);
        document.getElementById("sgst").innerText = sgst.toFixed(2);
        document.getElementById("cgst").innerText = cgst.toFixed(2);
        document.getElementById("grandTotal").innerText = grandTotal.toFixed(2);

        document.getElementById("invoiceWords").innerText = numberToWords(grandTotal);
    }

    function numberToWords(number) {
        // Basic function to convert numbers to words
        // Replace with full implementation if needed
        return number + " INR Only";
    }
</script>

</body>
</html>
